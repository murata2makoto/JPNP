PNPのQRコードによる表現

1. 目的

各受験者ごとにPNP設定ツールで作成したPNPデータを、PNPデータベースに登録して運用するのが、1EdTechで想定している運用形態である。しかし、PNPデータベースは個人情報、しかも障害についての個人情報の塊となってしまう。このようなデータベースを、個人情報保護をきちんと行って運用することは簡単ではない。各関係者の了承を得ること、PNPデータベースのセキュリティを保証すること、実際に運用することにはさまざまの困難が予想される。

こうした問題を回避するため、データベースを用いずに、使い捨てのQRコードでPNPを管理する方式を試みる。具体的には、各受験者に対してPNPをあらかじめ設定し、そこからQRコードを生成する。この時点でPNPデータ廃棄され、各受験者の手元にQRコードが残る。受検時には、このQRコードをコンピュータに付属するカメラで読み取らせてPNPデータを復元する。QRコードに個人名はいっさい含まれていないのでQRコードを紛失しても何の問題もない。

2. 方式

QRコードを作る準備としての文字列表現を考える

JSONなりXMLから、この文字列表現を生成し、それをQRコードにする。逆にQRコードからJSONやXMLを作るときは、この文字列表現をいったん生成する。

文字列は、0から9までの数だけからなる。他の文字は含まない。

文字列表現は、以下の6つの文字列を単に連結したものとする。合計で47文字となる。

1) 先頭6文字

JDC QRコードのバージョン: 199601 (1996はDAISY Consortiumの設立年度）

2) 色を表す27文字

背景色: ([0-2][0-9][0-9])[3]
フォント色: ([0-2][0-9][0-9])[3]
ルビ色:  ([0-2][0-9][0-9])[3]

3) フォントを表す7文字

フォントフェース: 0 ("serif") | 1("sans serif")
フォントの大きさ: [0-9]{3} #10倍して必ず整数にする
ルビフォントの大きさ: [0-9]{3} #10倍して必ず整数にする

4) 字間・語間・行間を表す12文字

字間: [0-9]{3} #10倍して小数点をなくす
行間: [0-9]{3} #10倍して小数点をなくす
語間: [0-9]{3} #10倍して小数点をなくす
ルビと親文字の距離: [0-9]{3} #10倍して小数点をなくす

5) 他のテキストレイアウトを表す4文字

word-wrap: [0-1]
縦横好み: [0-2]
ルビ好み: [0-3]
分かち書き好み: [0-2]

3. QRコードによる表現

現在は合計で56文字になる。

QRコードのNumeric Modeを使うなら、レベル10でエラー訂正Qのとき、427文字まで表現できる。まだまだ余裕があり、将来にわたってPNPのQRコードによる表現は十分に可能である。


